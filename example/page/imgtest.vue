<template>    <div id="imgtest">        <div class="info_banner_container">            <!--icon 接口-->            <!--<con_icon_container_five>-->                <!--<ul class="icon_ul">-->                    <!--<li class="icon_li" v-for="item in itemIcon">-->                        <!--<con_icon_five :itemProp="item"></con_icon_five>-->                    <!--</li>-->                <!--</ul>-->            <!--</con_icon_container_five>-->            <img_icon></img_icon>        </div>    </div></template><script>    import reqDataConfig from '../commonjs/no_scene_req_data_config'    import fetch from '../commonjs/fetch'    import {docCookies} from '../commonjs/utils'    import con_icon_container_five from "../../src/banner/con_icon_container_five";    import {getIconData} from "../conService/banner/service";  // 单独引入    export default {        name:'imgtest',        data:function(){            return {                items:[],                itemIcon:[],                url:"",                reqData:{},    //发给后端的数据                reqType:'get',                pageIndex:0,  //请求页数                pageSize:0,                isShow:false,  //控制页面是否到底                isShowTab:false,                isSecondCategory:true,                listPos:0            }        },        created(){            let self = this;            self.adjustParam();  // 初始化参数配置            self.getDataStart();  // 先获取位置        },        methods:{            adjustParam: function(){  // 调整和配置页面请求的参数                let self = this;                let reqDConfig = reqDataConfig.page_info_icon_config;                self.url = reqDConfig.url;                self.reqData = reqDConfig.reqData;                self.pageIndex = self.reqData.page_index;  //初始化pageIndex                self.pageSize = self.reqData.page_size;                self.reqType = reqDConfig.type;                self.addUrlParams();            },            getDataStart: async function(){  //初始打开页面加载数据                let self = this;                let res;  //请求返回内容                self.reqData.page_index = 0;                self.pageIndex = 0;                self.items = [];   // 必须有，涉及到vue的数据和视图绑定更新的问题                const url = "https://h5.dianping.com/app/adunion-newjh/index.html#/page_info_group_slit";                self.itemIcon = await getIconData(url, self);                try{                    res = await fetch(self.url, self.reqType, self.reqData);                    if(res.shop_info.length < self.pageSize){                        //console.log(res.shop_info.length);                        self.isShow = true;                    }                    if(res.status === 0){                        for(let i = 0, len = res.shop_info.length; i < len; i++){                            res.shop_info[i].pos = self.listPos;                            self.listPos++;                        }                        self.items = self.items.concat(res.shop_info);                    }else{                        self.isShow = true;                        //console.log(res.msg)                    }                }catch(error){                    throw("getDataStart函数获取getshoplist数据错误" + error);                }            },            isToBottom:function(){   // 判断是否到底部                let wScrollY = window.scrollY; // 当前滚动条位置 0                let wInnerH = window.innerHeight; // 设备窗口的高度（不会变）667                let bScrollH = document.body.scrollHeight; // 滚动条总高度 667                if (wScrollY + wInnerH >= bScrollH) {   // 下滑到底部                    return true;                }else{                    return false;                }            },            transParam:function(item){  // 点击二级类目后 ，要重新调整pageIndex                let self = this;                self.reqData['mainsecondcategory'] = item.cat1_id;                self.pageIndex = 0;                self.reqData.page_index = self.pageIndex;                self.getDataStart();            },            // 元素上下移动 top属性需有效            tabPositionMove:function(ele,direction){  // eleTopPos元素距离顶端距离,单位像素， ele元素对象,direction为移动方向                //direction： up down                let self = this;                let wScrollY = window.scrollY;                let eleTopPos = 80;                if(direction === 'up'){                    if(eleTopPos - wScrollY > 0){     // || eleTopPos - wScrollY > 0                        self.isShowTab = false;                    }else{                        self.isShowTab = true;                    }                }            },            addUrlParams:function(){                let self = this;                // 兼容utm插入到中间的问题                "cat2_id|sub_media|slotId|slotID|cityId|cat1ID|timestamp|lat|lng|deviceID|deviceId|media|mainsecondcategory|shoptype|fh|utm|utm_source|needcheck|info_type|channelId|utmSourceId|needFirstDeepLink".split('|').forEach(function (item) {   //cat0ID|referRequestID|referPlatformID|lng|lat|                    let val = self.getQueryString(item);                    if(val && val !== '*'){                        self.reqData[item] = val;                    }                });            },            getQueryString: function (name) {                let reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");                let r = window.location.search.substr(1).match(reg);                if (r !== null) return r[2]; return null;            }        },        props:{        },        computed:{        },        components:{}    }</script><style lang="stylus" scoped>    .page_info_icon        font-size:0.1rem;    .info_container        color:black;        margin-bottom:0.04rem;        max-height:2.595rem;        font-size:0.1rem;    .info_banner_container        font-size:0.1rem;    .info_tab_container        background-color:white;        z-index:3;        height:0.44rem;        width:100%;        position:relative;        overflow: hidden;    .ad        position:absolute;        z-index:80;        color:#6666;        font-size:0.1rem;        right:0.01rem;    .info_ul        margin-top:0.04rem;    .info_list        position:relative;    .bottomTips        width:100%;        height:0.44rem;        top:0.44rem;        border:none;    .con_loading        width:100%;        height:100%;    .icon_ul        width:100%;        height:100%;        position:relative;        display:flex;        flex-wrap:wrap;        flex-direction:row;        justify-content:space-between;        align-content:space-between;        .icon_li   // 控制每一个icon的占位比例            position:relative;            width:18%;            height:100%;</style>