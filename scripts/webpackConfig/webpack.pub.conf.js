/** * Created by lzq on 2017/8/28. */const path = require('path');const utils = require('./../utils');const webpack = require('webpack');const config = require('../../config/index');const merge = require('webpack-merge');const baseWebpackConfig = require('./webpack.base.conf.js');const CopyWebpackPlugin = require('copy-webpack-plugin');const components = require('../../components.json');const env = process.env.NODE_ENV === 'testing'    ? require('../config/test.env')    : config.build.env;const webpackConfig = merge(baseWebpackConfig, {    entry: components,    module: {        rules: utils.styleLoaders({            sourceMap: config.build.productionSourceMap            // extract:true  // 抽离css        })    },    output:{        path: config.build.assetsRoot,  // build目录        filename: '[name].js',        library:'lib',        libraryTarget:'umd'    },    devtool:'#source-map',    plugins:[        new webpack.DefinePlugin({            'process.env': env        }),        new CopyWebpackPlugin([            {                from: path.resolve(__dirname, '../../src/static'),                to: config.build.assetsStatic,                ignore: ['.*']            }        ])    ]});module.exports = webpackConfig;